<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>分步工资结算</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../lib/layui-v2.5.5/css/layui.css" media="all">
    <link rel="stylesheet" href="../css/public.css" media="all">
    <link rel="stylesheet" href="../js/lay-module/step-lay/step.css" media="all">
</head>
<body>
<div class="layuimini-container">
    <div class="layuimini-main">

        <div class="layui-fluid">
            <div class="layui-card">
                <div class="layui-card-body" style="padding-top: 40px;">
                    <div class="layui-carousel" id="stepForm" lay-filter="stepForm" style="margin: 0 auto;">
                        <div carousel-item>
                            <!--前提条件-->
                            <div>
                                <form class="layui-form" style="margin: 0 auto;max-width: 460px;padding-top: 40px;">
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">发薪日期:</label>
                                        <div class="layui-input-block">
                                            <input type="text" placeholder="请填写发薪日期" class="layui-input" id="pay-date"
                                                   required>
                                        </div>
                                    </div>

                                    <div class="layui-form-item">
                                        <label class="layui-form-label">订单选择:</label>
                                        <div class="layui-input-block">
                                            <input type="text" name placeholder="请输入" autocomplete="off"
                                                   class="layui-input" id="orderFormList" ts-selected="" required>
                                        </div>
                                    </div>
                                    <div class="layui-input-block">
                                        <button class="layui-btn" lay-submit lay-filter="formStep">
                                            &emsp;下一步&emsp;
                                        </button>
                                    </div>
                                </form>
                            </div>

                            <!--填写员工信息-->
                            <div>

                            </div>
                            <!--填写工资详情-->
                            <div>

                            </div>
                            <!--完成界面-->
                            <div>
                                <p>完成</p>

                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <script src="../lib/layui-v2.5.5/layui.js" charset="utf-8"></script>
    <script src="../js/lay-config.js?v=1.0.4" charset="utf-8"></script>
    <script>
        layui.use(['form', 'step', 'laydate','tableSelect'], function () {
            var $ = layui.$,
                form = layui.form,
                laydate = layui.laydate,
                tableSelect = layui.tableSelect,
                step = layui.step;
            //  设置分布表单
            step.render({
                elem: '#stepForm',
                filter: 'stepForm',
                width: '100%', //设置容器宽度
                stepWidth: '750px',
                height: '500px',
                stepItems: [{
                    title: '前提条件'
                }, {
                    title: '填写员工信息'
                }, {
                    title: '填写工资详情'
                }, {
                    title: '完成'
                }]
            });
            //设置日期
            laydate.render({
                elem: '#pay-date',
                type: 'month'
            });
            //设置多选
            tableSelect.render({
                elem: '#orderFormList',	//定义输入框input对象 必填
                checkedKey: 'id', //表格的唯一建值，非常重要，影响到选中状态 必填
                height:'400',  //自定义高度
                width:'500',  //自定义宽度
                table: {	//定义表格参数，与LAYUI的TABLE模块一致，只是无需再定义表格elem
                    url:'/orderform/list',
                    parseData: function (res) {
                        return {
                            "code": res.code, //解析接口状态
                            "msg": res.message, //解析提示文本
                            "count": res.data.total, //解析数据长度
                            "data": res.data.list
                        };
                    },
                    request: {
                        pageName: 'pageNum',//页码的参数名称，默认：page
                        limitName: 'pageSize'//每页数据量的参数名，默认：limit
                    },
                    cols: [
                        [
                            {field: 'id', width: 80, title: 'ID', sort: true},
                            {field: 'company', width: 160, title: '所属公司'},
                            {field: 'styleNumber', width: 120, title: '款号'},
                            {field: 'styleDescription', width: 120, title: '款式名称'},
                            {field: 'cuttingNumber', width: 100, title: '裁单数量'},
                            {field: 'actualNumber', width: 100, title: '实际数量'},
                            {
                                field: 'isComplete', width: 100, title: '是否结算', templet: function (d) {
                                    if (d.isComplete === 0) {
                                        return '<span style="color: red">未结算</span>';
                                    } else {
                                        return '<span style="color: green">已结算</span>';
                                    }

                                }
                            },
                            {field: 'note', width: 180, title: '备注'},
                        ]
                    ],
                    limits: [10, 15, 20, 25, 50, 100],
                    limit: 10,
                    page: true,
                    skin: 'line'
                },
                done: function (elem, data) {
                    //选择完后的回调，包含2个返回值 elem:返回之前input对象；data:表格返回的选中的数据 []
                    //拿到data[]后 就按照业务需求做想做的事情啦~比如加个隐藏域放ID...
                }
            })


            form.on('submit(formStep)', function (data) {
                step.next('#stepForm');
                return false;
            });

            form.on('submit(formStep2)', function (data) {
                step.next('#stepForm');
                return false;
            });

            $('.pre').click(function () {
                step.pre('#stepForm');
            });

            $('.next').click(function () {
                step.next('#stepForm');
            });
        })
    </script>
</body>
</html>